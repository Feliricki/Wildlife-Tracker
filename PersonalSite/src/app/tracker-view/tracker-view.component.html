<!-- <div class="main-content"> -->
<mat-sidenav-container class="sidenav-container" [hasBackdrop]="false">

  <!-- NOTE: Change the opened state to false later. -->
  <mat-sidenav #sidenav mode="over" [opened]="true" [fixedInViewport]="true" fixedTopGap="50" class="sidenav"
    [disableClose]="true">

    <div class="search-container">

      @if(sidenav.opened || searchOpened()){
      <app-simple-search [hidden]="!searchOpened" [allStudies]="currentStudies" (closeComponent)="closeSearchNav()"
        (componentInitialized)="initializeSearchNav()" (panToMarkerEvent)="panToMarker($event)"></app-simple-search>
      }

    </div>
  </mat-sidenav>
  <mat-sidenav-content class="sidenav-content">

    <!-- NOTE: This is another sidenav within the outer sidenav -->
    <mat-sidenav class="right-sidenav" #rightSidenav [opened]="false" position="end" [disableClose]="true" mode="over"
      [fixedInViewport]="true">

      <app-events #eventComponent (lineDataEmitter)="updateLineStringData($event)" (closeRightNavEmitter)="closeRightNav()" [currentStudy]="currentStudy"></app-events>

    </mat-sidenav>

    <mat-sidenav-content class="sidenav-content-right">

      @if (leftButtonFlag() === true){
      <button mat-fab [hidden]="!leftButtonFlag()" @leftToggleClick (click)="openSearchNav()"
        class="toggle-button"><mat-icon>chevron_right</mat-icon></button>
      }

      <!-- TODO: Move the toggle button belongs the search component -->
      @if (activeMap === "google"){
      <app-google-map [pathEventData$]="currentEventLineData$" (mapStateEmitter)="updateMapState($event)" (studiesEmitter)="studiesMessage($event)" (studyEmitter)="studyMessage($event)"
        [focusedMarker]="currentMarker"></app-google-map>
      }

      @if (rightButtonFlag() === true && mapLoaded()){
      <button mat-fab @rightToggleClick (click)="openRightNav()"
        class="right-toggle-button"><mat-icon>chevron_left</mat-icon></button>
      }

    </mat-sidenav-content>

  </mat-sidenav-content>
</mat-sidenav-container>
